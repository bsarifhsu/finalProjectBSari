
{% extends 'base.html' %}

{% block title %}
    Search
{% endblock %}

{% block content %}
    <h1>Query NetDetective API</h1>
    <form method="post" action="{% url 'query' %}">
        {% csrf_token %}
        <label for="ip_address">Enter IP Address:</label>
        <input type="text" id="ip_address" name="ip_address" required>
        <button type="submit">Submit</button>
    </form>

    <div>
        <!-- Display retrieved data -->
        {% if result %}
            <!-- Display the result received from the API -->
            <p>IP Address: {{ result.ipAddress }}</p>
            <p>Is VPN: {{ result.isVpn }}</p>
            <!-- Display other relevant information -->
        {% endif %}
    </div>

    <div>
        <h1>Queries</h1>
        {% if queries %}
            <ul>
                {% for query in queries %}
                    <li>
                        Query by: {{ query.user.username }} - IP Address: {{ query.ip_address }}
                        <!-- Add other fields as needed -->
                    </li>
                {% endfor %}
            </ul>
        {% else %}
            <p>No queries found.</p>
        {% endif %}

    </div>

{% endblock %}
